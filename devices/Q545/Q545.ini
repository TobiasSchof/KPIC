#
# KPIC FIU PI Tip-Tilt mirror initialization file
#
#
# WARNING: the lack of spaces between commas is a functional choice. If spaces
# are added, scripts may break (as no strip is applied to this data)

[Communication]
# Default location to store TTM debug file
debug_log:  /nfiudata/LOGS/Q545.log

[Environment]
# Command to start control script
# to use with Popen: split by "|" and then split beginning by " "
start_command: tmux new -d -s Q545|Q545_Control
# Command to end control script
end_command:   tmux kill-ses -t Q545

[TTM_Limits]
# Axis 1 lower limit
min: 0.
# Axis 1 higher limit
max: 10000.

[Shm_Info]
# for each of the following, the first element is the path to the shared 
#   memory and the second is the (numpy) data type in the shared memory
#
# The directory path below is made in Q545_Control, so change that file if
#   changing location of shms.

# NOTE: float16 might work, need to check precision of encoder
# Shared memory to store the current positiom
Pos_D:  /tmp/Q545/POSD.im.shm,float32
# NOTE: float16 might work, need to check precision of encoder
# Shared memory to store the target position
Pos_P:  /tmp/Q545/POSP.im.shm,float32
# Shared memory to store the current status
Stat_D: /tmp/Q545/STATUSD.im.shm,int8
# Shared memory to store the target status
Stat_P: /tmp/Q545/STATUSP.im.shm,int8
# Shared memory to store any error that arises
Error:  /tmp/Q545/ERROR.im.shm,uint8
# Shared memory to store the target servo state
#  (can also assume this is the current servo state)
Svos:   /tmp/Q545/SVOS.im.shm,int8

# To get the size of a shared memory, look here and split by ","
[Shm_Init]
# pos, pos
# Nonsense values that will be overwritten
Pos_D:  -5000.
# pos, pos
# The center of the TTM's range
Pos_P:  5000.
# 2 = moving // 1 = all (stage & script) on // 0 = stage off
#    -1 = script dead // -2 = all off 
# NOTE: a starting value of 2 is picked to force the control script to update
Stat_D: 2
# 1 = device on // 0 = device off
Stat_P: 1
# 0 = None // 1 = MovementRange // 2 = LoopOpen // 3 = StageOff
Error:  0
# whether the servo is on
Svos:   1
